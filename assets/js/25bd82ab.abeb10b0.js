"use strict";(self.webpackChunkwebsite_2=self.webpackChunkwebsite_2||[]).push([[887],{3905:function(e,n,t){t.d(n,{Zo:function(){return h},kt:function(){return m}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},h=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},s=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,c=e.originalType,l=e.parentName,h=a(e,["components","mdxType","originalType","parentName"]),s=u(t),m=i,g=s["".concat(l,".").concat(m)]||s[m]||p[m]||c;return t?r.createElement(g,o(o({ref:n},h),{},{components:t})):r.createElement(g,o({ref:n},h))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var c=t.length,o=new Array(c);o[0]=s;var a={};for(var l in n)hasOwnProperty.call(n,l)&&(a[l]=n[l]);a.originalType=e,a.mdxType="string"==typeof e?e:i,o[1]=a;for(var u=2;u<c;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}s.displayName="MDXCreateElement"},1727:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return a},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return h},default:function(){return s}});var r=t(7462),i=t(3366),c=(t(7294),t(3905)),o=["components"],a={title:"T\u1ed5ng qu\xe1t"},l=void 0,u={unversionedId:"tutorial/config/get_started",id:"tutorial/config/get_started",isDocsHomePage:!1,title:"T\u1ed5ng qu\xe1t",description:"C\xe1c service trong h\u1ec7 th\u1ed1ng \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh \u0111\u1ed9c l\u1eadp.",source:"@site/docs/tutorial/config/get_started.md",sourceDirName:"tutorial/config",slug:"/tutorial/config/get_started",permalink:"/iot-server/docs/tutorial/config/get_started",tags:[],version:"current",lastUpdatedBy:"tranphuong.080",lastUpdatedAt:1632986759,formattedLastUpdatedAt:"9/30/2021",frontMatter:{title:"T\u1ed5ng qu\xe1t"},sidebar:"tutorial",previous:{title:"C\u1ea5u tr\xfac th\u01b0 m\u1ee5c",permalink:"/iot-server/docs/tutorial/folder_structure"},next:{title:"Domain",permalink:"/iot-server/docs/tutorial/config/domain"}},h=[{value:"C\u1ea5u h\xecnh service logic",id:"c\u1ea5u-h\xecnh-service-logic",children:[{value:"C\u1ea5u h\xecnh th\xf4ng qua file <code>.json</code> config",id:"c\u1ea5u-h\xecnh-th\xf4ng-qua-file-json-config",children:[]},{value:"C\u1ea5u h\xecnh th\xf4ng qua bi\u1ebfn m\xf4i tr\u01b0\u1eddng <code>docker-compose</code> file",id:"c\u1ea5u-h\xecnh-th\xf4ng-qua-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-docker-compose-file",children:[]}]},{value:"C\u1ea5u h\xecnh service web",id:"c\u1ea5u-h\xecnh-service-web",children:[]},{value:"C\u1ea5u h\xecnh c\xe1c service kh\xe1c",id:"c\u1ea5u-h\xecnh-c\xe1c-service-kh\xe1c",children:[]}],p={toc:h};function s(e){var n=e.components,t=(0,i.Z)(e,o);return(0,c.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,c.kt)("p",null,"C\xe1c service trong h\u1ec7 th\u1ed1ng \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh \u0111\u1ed9c l\u1eadp."),(0,c.kt)("h2",{id:"c\u1ea5u-h\xecnh-service-logic"},"C\u1ea5u h\xecnh service logic"),(0,c.kt)("p",null,"\u0110\u1ed1i v\u1edbi c\xe1c service logic ",(0,c.kt)("inlineCode",{parentName:"p"},"users_service")," ",(0,c.kt)("inlineCode",{parentName:"p"},"devices_service")," ",(0,c.kt)("inlineCode",{parentName:"p"},"automatic_service")," ",(0,c.kt)("inlineCode",{parentName:"p"},"relations_service")," ",(0,c.kt)("inlineCode",{parentName:"p"},"update_service")," ",(0,c.kt)("inlineCode",{parentName:"p"},"files_service"),". C\xf3 2 c\xe1ch \u0111\u1ec3 c\u1ea5u h\xecnh tham s\u1ed1"),(0,c.kt)("h3",{id:"c\u1ea5u-h\xecnh-th\xf4ng-qua-file-json-config"},"C\u1ea5u h\xecnh th\xf4ng qua file ",(0,c.kt)("inlineCode",{parentName:"h3"},".json")," config"),(0,c.kt)("p",null,(0,c.kt)("a",{parentName:"p",href:"http://localhost:3000/iot-server/docs/tutorial/folder_structure#c%E1%BA%A5u-tr%C3%BAc-th%C6%B0-m%E1%BB%A5c-trong-service-container"},"Folder config trong m\u1ed7i service container")," \u0111\u01b0\u1ee3c m\u1eb7c \u0111\u1ecbnh mount t\u1edbi ",(0,c.kt)("a",{parentName:"p",href:"/docs/tutorial/folder_structure#c%E1%BA%A5u-tr%C3%BAc-th%C6%B0-m%E1%BB%A5c-c%C3%A0i-%C4%91%E1%BA%B7t-clone-t%E1%BB%AB-github"},"folder config \u1edf ngo\xe0i"),"."),(0,c.kt)("p",null,"Folder config m\u1eb7c \u0111\u1ecbnh bao g\u1ed3m"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre"},".\n\u251c\u2500\u2500 default.json        -- file c\u1ea5u h\xecnh n\u1ec1n (m\u1eb7c \u0111\u1ecbnh).\n\u2514\u2500\u2500 productionpkg.json  -- file c\u1ea5u h\xecnh t\xf9y thu\u1ed9c v\xe0o bi\u1ebfn m\xf4i tr\u01b0\u1eddng `NODE_ENV`, ghi \u0111\xe8 l\xean file c\u1ea5u h\xecnh m\u1eb7c \u0111\u1ecbnh.\n")),(0,c.kt)("p",null,"C\xe1c c\u1ea5u h\xecnh trong file json c\xf3 d\u1ea1ng json Object:"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-json"},'"paginate": {\n  "default": 200,\n  "max": 1000\n}\n')),(0,c.kt)("h3",{id:"c\u1ea5u-h\xecnh-th\xf4ng-qua-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-docker-compose-file"},"C\u1ea5u h\xecnh th\xf4ng qua bi\u1ebfn m\xf4i tr\u01b0\u1eddng ",(0,c.kt)("inlineCode",{parentName:"h3"},"docker-compose")," file"),(0,c.kt)("p",null,"Trong c\u1ea5u h\xecnh cho m\u1ed7i container trong file ",(0,c.kt)("inlineCode",{parentName:"p"},"docker-compose-services.yml"),", bi\u1ebfn m\xf4i tr\u01b0\u1eddng trong container c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh th\xf4ng qua thu\u1ed9c t\xednh ",(0,c.kt)("inlineCode",{parentName:"p"},"environment")," (",(0,c.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/compose-file/compose-file-v3/#environment"},"link tham kh\u1ea3o"),") v\xe0 ",(0,c.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/environment-variables/"},"s\u1eed d\u1ee5ng bi\u1ebfn m\xf4i tr\u01b0\u1eddng trong docker-compose.yml")),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre"},"environment:\n  - NODE_ENV=productionpkg\n  - MKPS_paginate__default=100\n  - MKPS_paginate__max=1000\n")),(0,c.kt)("p",null,"Bi\u1ebfn m\xf4i tr\u01b0\u1eddng c\xf3 ",(0,c.kt)("strong",{parentName:"p"},"c\u1ea5u tr\xfac")," t\xean c\u1ee5 th\u1ec3 s\u1ebd \u0111\u01b0\u1ee3c ghi \u0111\xe8 gi\xe1 tr\u1ecb l\xean gi\xe1 tr\u1ecb trong c\xe1c file config."),(0,c.kt)("p",null,"T\xean bi\u1ebfn m\xf4i tr\u01b0\u1eddng d\xe0nh cho ghi \u0111\xe8 config c\xf3 ti\u1ec1n t\u1ed1 ",(0,c.kt)("inlineCode",{parentName:"p"},"MKPS_"),", theo sau l\xe0 t\xean tr\u01b0\u1eddng. \u0110\u1ed1i v\u1edbi nested Object, d\u1ea5u ",(0,c.kt)("inlineCode",{parentName:"p"},".")," trong json Object s\u1ebd \u0111\u01b0\u1ee3c th\u1ec3 hi\u1ec7n b\u1eb1ng 2 d\u1ea5u g\u1ea1ch d\u01b0\u1edbi ",(0,c.kt)("inlineCode",{parentName:"p"},"__")),(0,c.kt)("p",null,"V\xed d\u1ee5: n\u1ebfu b\u1ea1n mu\u1ed1n ghi \u0111\xe8 c\u1ea5u h\xecnh ",(0,c.kt)("inlineCode",{parentName:"p"},"paginate.default")," trong json config file. T\xean bi\u1ebfn m\xf4i tr\u01b0\u1eddng t\u01b0\u01a1ng \u1ee9ng s\u1ebd l\xe0 ",(0,c.kt)("inlineCode",{parentName:"p"},"MKPS_paginate__default")),(0,c.kt)("p",null,"C\xe1c tham s\u1ed1 c\u1ea5u h\xecnh s\u1ebd \u0111\u01b0\u1ee3c t\u1ea3i l\xean khi service kh\u1edfi ch\u1ea1y."),(0,c.kt)("p",null,(0,c.kt)("strong",{parentName:"p"},"M\u1ed9t s\u1ed1 c\u1ea5u h\xecnh chung cho c\xe1c service \u0111\u01b0\u1ee3c ch\xfang t\xf4i \u0111\u1eb7t s\u1eb5n chung cho m\u1ecdi service th\xf4ng qua file ",(0,c.kt)("inlineCode",{parentName:"strong"},".envDeploy"),". C\xe1c bi\u1ebfn m\xf4i tr\u01b0\u1eddng n\xe0y \u0111\u1ea7u ti\xean s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng c\xf9ng v\u1edbi file docker-compose \u0111\u1ec3 sinh ra file yml t\u1ea1m ",(0,c.kt)("inlineCode",{parentName:"strong"},"production-.yml"))),(0,c.kt)("h2",{id:"c\u1ea5u-h\xecnh-service-web"},"C\u1ea5u h\xecnh service web"),(0,c.kt)("p",null,"M\u1ed9t s\u1ed1 c\u1ea5u h\xecnh cho web service th\xf4ng qua bi\u1ebfn m\xf4i tr\u01b0\u1eddng \u0111\u01b0\u1ee3c \u0111\u1eb7t trong file ",(0,c.kt)("inlineCode",{parentName:"p"},"docker-compose-frontend.yml")),(0,c.kt)("h2",{id:"c\u1ea5u-h\xecnh-c\xe1c-service-kh\xe1c"},"C\u1ea5u h\xecnh c\xe1c service kh\xe1c"),(0,c.kt)("p",null,"C\xe1c service kh\xe1c nh\u01b0 ",(0,c.kt)("a",{parentName:"p",href:"https://docs.emqx.io/en/broker/v2.0/"},"emqtt"),", ",(0,c.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/mongo"},"mongodb"),", ",(0,c.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/redis"},"redis"),", ",(0,c.kt)("a",{parentName:"p",href:"https://doc.traefik.io/traefik/v1.7/"},"traefik")," s\u1eed d\u1ee5ng c\xe1ch c\u1ea5u h\xecnh t\u01b0\u01a1ng \u1ee9ng theo t\u1eebng service. C\xf3 th\u1ebb tham kh\u1ea3o t\u1ea1i trang th\xf4ng tin c\u1ee7a t\u1eebng service"))}s.isMDXComponent=!0}}]);