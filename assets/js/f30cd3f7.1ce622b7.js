"use strict";(self.webpackChunkwebsite_2=self.webpackChunkwebsite_2||[]).push([[175],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return d}});var i=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var l=i.createContext({}),s=function(t){var e=i.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},u=function(t){var e=s(t.components);return i.createElement(l.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},h=i.forwardRef((function(t,e){var n=t.components,r=t.mdxType,a=t.originalType,l=t.parentName,u=c(t,["components","mdxType","originalType","parentName"]),h=s(n),d=r,m=h["".concat(l,".").concat(d)]||h[d]||p[d]||a;return n?i.createElement(m,o(o({ref:e},u),{},{components:n})):i.createElement(m,o({ref:e},u))}));function d(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var a=n.length,o=new Array(a);o[0]=h;var c={};for(var l in e)hasOwnProperty.call(e,l)&&(c[l]=e[l]);c.originalType=t,c.mdxType="string"==typeof t?t:r,o[1]=c;for(var s=2;s<a;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6554:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return u},default:function(){return h}});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),o=["components"],c={id:"test",title:"Ki\u1ec3m th\u1eed"},l=void 0,s={unversionedId:"tutorial/test",id:"tutorial/test",isDocsHomePage:!1,title:"Ki\u1ec3m th\u1eed",description:"Stress test, Stable test",source:"@site/docs/tutorial/test.md",sourceDirName:"tutorial",slug:"/tutorial/test",permalink:"/iot-server/docs/tutorial/test",tags:[],version:"current",lastUpdatedBy:"tranphuong.080",lastUpdatedAt:1641740346,formattedLastUpdatedAt:"1/9/2022",frontMatter:{id:"test",title:"Ki\u1ec3m th\u1eed"},sidebar:"tutorial",previous:{title:"Ph\xe2n quy\u1ec1n",permalink:"/iot-server/docs/tutorial/function/roles"},next:{title:"Gi\xe1m s\xe1t",permalink:"/iot-server/docs/tutorial/mantain/monitor"}},u=[{value:"Stress test, Stable test",id:"stress-test-stable-test",children:[{value:"Chu\u1ea9n b\u1ecb",id:"chu\u1ea9n-b\u1ecb",children:[]},{value:"Th\u1ef1c hi\u1ec7n test",id:"th\u1ef1c-hi\u1ec7n-test",children:[]},{value:"K\u1ebft qu\u1ea3 test n\u1ed9i b\u1ed9",id:"k\u1ebft-qu\u1ea3-test-n\u1ed9i-b\u1ed9",children:[]}]}],p={toc:u};function h(t){var e=t.components,c=(0,r.Z)(t,o);return(0,a.kt)("wrapper",(0,i.Z)({},p,c,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"stress-test-stable-test"},"Stress test, Stable test"),(0,a.kt)("h3",{id:"chu\u1ea9n-b\u1ecb"},"Chu\u1ea9n b\u1ecb"),(0,a.kt)("h4",{id:"t\xe0i-kho\u1ea3n-ng\u01b0\u1eddi-d\xf9ng-v\xe0-thi\u1ebft-b\u1ecb"},"T\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng v\xe0 thi\u1ebft b\u1ecb"),(0,a.kt)("p",null,"Qu\xe1 tr\xecnh test kh\u1ea3 n\u0103ng ch\u1ecbu t\u1ea3i c\u1ee7a h\u1ec7 th\u1ed1ng th\xf4ng qua giao di\u1ec7n API http v\xe0 giao di\u1ec7n giao ti\u1ebfp MQTT."),(0,a.kt)("p",null,"H\u1ec7 th\u1ed1ng h\u1ed7 tr\u1ee3 qu\xe1 tr\xecnh stress test v\xe0 test ho\u1ea1t \u0111\u1ed9ng c\u1ee7a h\u1ec7 th\u1ed1ng th\xf4ng qua 2 API:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"API kh\u1edfi t\u1ea1o t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng v\xe0 t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Endpoint : /users-performance-test"),(0,a.kt)("li",{parentName:"ul"},"Method : POST"),(0,a.kt)("li",{parentName:"ul"},"Payload Data :",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"totalDevice (number): S\u1ed1 l\u01b0\u1ee3ng t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng v\xe0 thi\u1ebft b\u1ecb \u0111\u01b0\u1ee3c t\u1ea1o"),(0,a.kt)("li",{parentName:"ul"},"deviceTypeId (string): M\xe3 lo\u1ea1i thi\u1ebft b\u1ecb cho thi\u1ebft b\u1ecb \u0111\u01b0\u1ee3c t\u1ea1o")))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"API x\xf3a t\u1ea5t c\u1ea3 t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng v\xe0 t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb (c\xf9ng d\u1eef li\u1ec7u l\u1ecbch s\u1eed)")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Endpoint : /users-performance-test"),(0,a.kt)("li",{parentName:"ul"},"Method : DELETE")),(0,a.kt)("p",null,"API Kh\u1edfi t\u1ea1o s\u1ebd t\u1ea1o 1 lo\u1ea1t c\xe1c t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng v\u1edbi ",(0,a.kt)("inlineCode",{parentName:"p"},"username")," b\u1eaft \u0111\u1ea7u v\u1edbi chu\u1ed7i ",(0,a.kt)("inlineCode",{parentName:"p"},"pft_u")," theo sau l\xe0 s\u1ed1 th\u1ee9 t\u1ef1 t\xe0i kho\u1ea3n, m\u1eadt kh\u1ea9u c\u1ee7a t\u1ea5t c\u1ea3 c\xe1c t\xe0i kho\u1ea3n s\u1ebd l\xe0 ",(0,a.kt)("inlineCode",{parentName:"p"},"mkpsmarthome"),"."),(0,a.kt)("p",null,"T\u01b0\u01a1ng \u1ee9ng c\xe1c t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb \u0111\u01b0\u1ee3c t\u1ea1o s\u1ebd c\xf3 ",(0,a.kt)("inlineCode",{parentName:"p"},"productId")," b\u1eaft \u0111\u1ea7u b\u1eb1ng ",(0,a.kt)("inlineCode",{parentName:"p"},"pft_d"),", m\u1eadt kh\u1ea9u c\u1ee7a c\xe1c t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb m\u1eb7c \u0111\u1ecbnh l\xe0 ",(0,a.kt)("inlineCode",{parentName:"p"},"mkpsmarthome")," (ho\u1eb7c theo ",(0,a.kt)("inlineCode",{parentName:"p"},"defaultPassword")," trong file c\u1ea5u h\xecnh service ",(0,a.kt)("inlineCode",{parentName:"p"},"device-service"),")"),(0,a.kt)("p",null,"C\xe1c t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\u1ee5ng \u0111\u01b0\u1ee3c t\u1ea1o ra c\xf3 th\u1ec3 publish d\u1eef li\u1ec7u l\xean topic c\xf3 c\u1ea5u tr\xfac ",(0,a.kt)("inlineCode",{parentName:"p"},"d/+/s/${username}/CP/#")," v\xe0 subcribe d\u1eef li\u1ec7u trong topic c\xf3 c\u1ea5u tr\xfac ",(0,a.kt)("inlineCode",{parentName:"p"},"d/+/p/UP/#"),". \u0110i\u1ec1u n\xe0y cho ph\xe9p c\xe1c t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 nghe d\u1eef li\u1ec7u v\xe0 g\u1eedi d\u1eef li\u1ec7u t\u1edbi m\u1ecdi t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb."),(0,a.kt)("h4",{id:"c\xf4ng-c\u1ee5-monitor-server"},"C\xf4ng c\u1ee5 monitor server"),(0,a.kt)("p",null,"\u0110\u1ec1 xu\u1ea5t c\xf3 th\u1ec3 s\u1eed d\u1ee5ng netdata ho\u1eb7c b\u1ea5t k\u1ef3 c\xf4ng c\u1ee5 gi\xe1m s\xe1t ghi log tr\u1ea1ng th\xe1i ho\u1ea1t \u0111\u1ed9ng c\u1ee7a server n\xe0o."),(0,a.kt)("h4",{id:"c\xf4ng-c\u1ee5-test"},"C\xf4ng c\u1ee5 Test"),(0,a.kt)("p",null,"Ng\u01b0\u1eddi x\xe2y d\u1ef1ng k\u1ecbch b\u1ea3n test s\u1eed d\u1ee5ng c\xf4ng c\u1ee5 b\u1ea5t k\u1ef3 ph\u1ee5c v\u1ee5 cho qu\xe1 tr\xecnh ki\u1ec3m th\u1eed t\u1ea3i tr\xean giao di\u1ec7n API HTTP ho\u1eb7c giao di\u1ec7n giao ti\u1ebfp MQTT. V\xed d\u1ee5 ",(0,a.kt)("inlineCode",{parentName:"p"},"Jmeter")),(0,a.kt)("h3",{id:"th\u1ef1c-hi\u1ec7n-test"},"Th\u1ef1c hi\u1ec7n test"),(0,a.kt)("h3",{id:"k\u1ebft-qu\u1ea3-test-n\u1ed9i-b\u1ed9"},"K\u1ebft qu\u1ea3 test n\u1ed9i b\u1ed9"),(0,a.kt)("p",null,"K\u1ebft qu\u1ea3 test do Makipos th\u1ef1c hi\u1ec7n tr\xean m\xe1y ch\u1ee7 c\xf3 c\u1ea5u h\xecnh 2 CPU, 4 GB RAM. S\u1eed d\u1ee5ng c\xf4ng c\u1ee5 Jmeter (5.0) v\u1edbi  ",(0,a.kt)("a",{parentName:"p",href:"https://cloud.makipos.net/s/2wHmpZS668tWMDs"},"plugin mqtt")),(0,a.kt)("p",null,(0,a.kt)("a",{target:"_blank",href:n(7327).Z},"File jmx")),(0,a.kt)("p",null,"K\u1ecbch b\u1ea3n test:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Kh\u1edfi t\u1ea1o 5000 t\xe0i kho\u1ea3n (5000 thi\u1ebft b\u1ecb, 5000 ng\u01b0\u1eddi d\xf9ng)"),(0,a.kt)("li",{parentName:"ol"},"Kh\u1edfi t\u1ea1o k\u1ebft n\u1ed1i MQTT l\xean server (6 k\u1ebft n\u1ed1i tr\xean gi\xe2y)"),(0,a.kt)("li",{parentName:"ol"},"M\u1ed7i t\xe0i kho\u1ea3n thi\u1ebft b\u1ecb publish d\u1eef li\u1ec7u l\xean 1 topic c\u1ee5 th\u1ec3 v\u1edbi t\u1ea5n su\u1ea5t trung b\xecnh 15 ph\xfat m\u1ed9t b\u1ea3n tin . T\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng t\u01b0\u01a1ng \u1ee9ng subcribe v\xe0o topic c\u1ee7a thi\u1ebft b\u1ecb t\u01b0\u01a1ng \u1ee9ng, x\xe1c nh\u1eadn vi\u1ec7c nh\u1eadn d\u1eef li\u1ec7u th\xe0nh c\xf4ng.")),(0,a.kt)("p",null,"K\u1ebft qu\u1ea3 :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"S\u1ed1 b\u1ea3n tin l\u1ed7i 0%"),(0,a.kt)("li",{parentName:"ul"},"T\xecnh tr\u1ea1ng server trong qu\xe1 tr\xecnh test :\n",(0,a.kt)("img",{src:n(1198).Z}),(0,a.kt)("img",{src:n(9338).Z}),(0,a.kt)("img",{src:n(152).Z}),(0,a.kt)("img",{src:n(3437).Z}),(0,a.kt)("img",{src:n(9319).Z}),(0,a.kt)("img",{src:n(9968).Z}))))}h.isMDXComponent=!0},7327:function(t,e,n){e.Z=n.p+"assets/files/pubsub_unidirection-a1f54c44f7762ccb3428ced4be426206.jmx"},1198:function(t,e,n){e.Z=n.p+"assets/images/cpu-040314a26ba4fd99c81ad6a3caa35601.png"},9968:function(t,e,n){e.Z=n.p+"assets/images/device_event_by_time-d56b871d06653cea7e985b671490281e.png"},9319:function(t,e,n){e.Z=n.p+"assets/images/disk-8209d4e30760b45a0541f5c9e3959a83.png"},3437:function(t,e,n){e.Z=n.p+"assets/images/network-8d815bee10fdfdd6ffb773f4c9e956a0.png"},9338:function(t,e,n){e.Z=n.p+"assets/images/ram-6efb8834a82d68e6cc66cfa022d7b6f7.png"},152:function(t,e,n){e.Z=n.p+"assets/images/swap-60e4f395e6a05c2a27835dcbe2bd32ab.png"}}]);